{"ast":null,"code":"var _jsxFileName = \"/home/ljnferreira/development/github-consulting/src/pages/Repositorio/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Container, Owner, Loading, BackButton, IssuesList, PageActions, FilterList } from './styles';\nimport { FaArrowLeft } from 'react-icons/fa';\nimport api from '../../services/api';\nexport default function Repositorio({\n  match\n}) {\n  const [repositorio, setRepositorio] = useState({});\n  const [issues, setIssues] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [filters, setFilters] = useState([{\n    state: 'all',\n    label: 'Todas',\n    active: true\n  }, {\n    state: 'open',\n    label: 'Abertas',\n    active: false\n  }, {\n    state: 'closed',\n    label: 'Fechadas',\n    active: false\n  }]);\n  const [filterIndex, setFilterIndex] = useState(0);\n  useEffect(() => {\n    async function load() {\n      const nomeRepo = decodeURIComponent(match.params.repositorio);\n      const [repositorioData, issuesData] = await Promise.all([api.get(`/repos/${nomeRepo}`), api.get(`/repos/${nomeRepo}/issues`, {\n        params: {\n          state: filters.find(f => f.active).state,\n          per_page: 5\n        }\n      })]);\n      setRepositorio(repositorioData.data);\n      setIssues(issuesData.data);\n      console.log(issuesData.data);\n      setLoading(false);\n    }\n\n    load();\n  }, [filters, match.params.repositorio]);\n  useEffect(() => {\n    async function loadIssue() {\n      const nomeRepo = decodeURIComponent(match.params.repositorio);\n      const response = await api.get(`/repos/${nomeRepo}/issues`, {\n        params: {\n          state: filters[filterIndex].state,\n          page,\n          per_page: 5\n        }\n      });\n      setIssues(response.data);\n    }\n\n    loadIssue();\n  }, [filterIndex, filters, match.params.repositorio, page]);\n\n  function handlePage(action) {\n    setPage(action === 'back' ? page - 1 : page + 1);\n  }\n\n  function handleFilter(index) {\n    setFilterIndex(index);\n  }\n\n  if (loading) {\n    return React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Carregando...\"));\n  }\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(BackButton, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(FaArrowLeft, {\n    color: \"#000\",\n    size: 30,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  })), React.createElement(Owner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: repositorio.owner.avatar_url,\n    alt: repositorio.owner.login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, repositorio.name), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, repositorio.description)), React.createElement(FilterList, {\n    active: filterIndex,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, filters.map((filter, index) => React.createElement(\"button\", {\n    type: \"button\",\n    key: filter.label,\n    onClick: () => handleFilter(index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, filter.label))), React.createElement(IssuesList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, issues.map(issue => React.createElement(\"li\", {\n    key: String(issue.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: issue.user.avatar_url,\n    alt: issue.user.login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: issue.html_url,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, issue.title), issue.labels.map(label => React.createElement(\"span\", {\n    key: String(label.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, label.name))), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, issue.user.login))))), React.createElement(PageActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handlePage('back'),\n    disabled: page < 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Voltar\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handlePage('next'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Proxima\")));\n}","map":{"version":3,"sources":["/home/ljnferreira/development/github-consulting/src/pages/Repositorio/index.js"],"names":["React","useState","useEffect","Container","Owner","Loading","BackButton","IssuesList","PageActions","FilterList","FaArrowLeft","api","Repositorio","match","repositorio","setRepositorio","issues","setIssues","loading","setLoading","page","setPage","filters","setFilters","state","label","active","filterIndex","setFilterIndex","load","nomeRepo","decodeURIComponent","params","repositorioData","issuesData","Promise","all","get","find","f","per_page","data","console","log","loadIssue","response","handlePage","action","handleFilter","index","owner","avatar_url","login","name","description","map","filter","issue","String","id","user","html_url","title","labels"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {Container, Owner, Loading, BackButton, IssuesList, PageActions, FilterList} from './styles';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport api from '../../services/api';\r\n\r\nexport default function Repositorio({match}){\r\n\r\n  const [repositorio, setRepositorio] = useState({});\r\n  const [issues, setIssues] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [filters, setFilters] = useState([\r\n    {state: 'all', label: 'Todas', active: true},\r\n    {state: 'open', label: 'Abertas', active: false},\r\n    {state: 'closed', label: 'Fechadas', active: false},\r\n  ]);\r\n  const [filterIndex, setFilterIndex] = useState(0);\r\n\r\n  useEffect(()=> {\r\n    \r\n    async function load(){\r\n      const nomeRepo = decodeURIComponent(match.params.repositorio);\r\n\r\n      const [repositorioData, issuesData] = await Promise.all([\r\n        api.get(`/repos/${nomeRepo}`),\r\n        api.get(`/repos/${nomeRepo}/issues`, {\r\n          params:{\r\n            state: filters.find(f => f.active).state, \r\n            per_page: 5\r\n          }\r\n        })\r\n      ]);\r\n\r\n      setRepositorio(repositorioData.data);\r\n      setIssues(issuesData.data);\r\n      console.log(issuesData.data);\r\n\r\n      setLoading(false);\r\n\r\n    }\r\n\r\n    load();\r\n\r\n  }, [filters, match.params.repositorio]);\r\n\r\n\r\n  useEffect(()=> {\r\n\r\n    async function loadIssue(){\r\n      const nomeRepo = decodeURIComponent(match.params.repositorio);\r\n\r\n      const response = await api.get(`/repos/${nomeRepo}/issues`, {\r\n        params:{\r\n          state: filters[filterIndex].state,\r\n          page,\r\n          per_page: 5,\r\n        },\r\n      });\r\n\r\n      setIssues(response.data);\r\n    }\r\n\r\n    loadIssue();\r\n\r\n  }, [filterIndex, filters, match.params.repositorio, page]);\r\n  \r\n  function handlePage(action){\r\n    setPage(action === 'back' ? page - 1 : page + 1 )\r\n  }\r\n\r\n  function handleFilter(index){\r\n    setFilterIndex(index);\r\n  }\r\n\r\n\r\n  if(loading){\r\n    return(\r\n      <Loading>\r\n        <h1>Carregando...</h1>\r\n      </Loading>\r\n    )\r\n  }\r\n  \r\n  return(\r\n    <Container>\r\n        <BackButton to=\"/\">\r\n          <FaArrowLeft color=\"#000\" size={30} />\r\n        </BackButton>\r\n\r\n        <Owner>\r\n          <img \r\n          src={repositorio.owner.avatar_url} \r\n          alt={repositorio.owner.login} \r\n          />\r\n          <h1>{repositorio.name}</h1>\r\n          <p>{repositorio.description}</p>\r\n        </Owner>\r\n\r\n        <FilterList active={filterIndex}>\r\n          {filters.map((filter, index) => (\r\n            <button\r\n             type=\"button\"\r\n             key={filter.label}\r\n             onClick={()=> handleFilter(index)}\r\n            >\r\n              {filter.label}\r\n            </button>\r\n          ) )}\r\n        </FilterList>\r\n\r\n        <IssuesList>\r\n          {issues.map(issue => (\r\n            <li key={String(issue.id)}>\r\n              <img src={issue.user.avatar_url} alt={issue.user.login} />\r\n\r\n              <div>\r\n                <strong>\r\n                  <a href={issue.html_url}>{issue.title}</a>\r\n\r\n                  {issue.labels.map(label => (\r\n                    <span key={String(label.id)}>{label.name}</span>\r\n                  ))}\r\n\r\n                </strong>\r\n\r\n                <p>{issue.user.login}</p>\r\n\r\n              </div>\r\n\r\n            </li>\r\n          ))}\r\n        </IssuesList>\r\n\r\n        <PageActions>\r\n          <button \r\n          type=\"button\" \r\n          onClick={()=> handlePage('back') }\r\n          disabled={page < 2}\r\n          >\r\n            Voltar\r\n          </button>\r\n\r\n          <button type=\"button\" onClick={()=> handlePage('next') }>\r\n            Proxima\r\n          </button>\r\n        </PageActions>\r\n\r\n    </Container>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/ljnferreira/development/github-consulting/src/pages/Main/index.js\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { FaGithub, FaPlus, FaSpinner, FaBars, FaTrash } from 'react-icons/fa';\nimport { Container, Form, SubmitButton, List, DeleteButton } from './styles';\nimport api from '../../services/api';\nexport default function Main() {\n  const [newRepo, setNewRepo] = useState('');\n  const [repositorios, setRepositorios] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState(null); // Buscar\n\n  useEffect(() => {\n    const repoStorage = localStorage.getItem('repos');\n\n    if (repoStorage) {\n      setRepositorios(JSON.parse(repoStorage));\n    }\n  }, []); // Salvar alterações\n\n  useEffect(() => {\n    localStorage.setItem('repos', JSON.stringify(repositorios));\n  }, [repositorios]);\n  const handleSubmit = useCallback(e => {\n    e.preventDefault();\n\n    async function submit() {\n      setLoading(true);\n      setAlert(null);\n\n      try {\n        if (newRepo === '') {\n          throw new Error('Você precisa indicar um repositorio!');\n        }\n\n        const response = await api.get(`repos/${newRepo}`);\n        const hasRepo = repositorios.find(repo => repo.name === newRepo);\n\n        if (hasRepo) {\n          throw new Error('Repositorio Duplicado');\n        }\n\n        const data = {\n          name: response.data.full_name\n        };\n        setRepositorios([...repositorios, data]);\n        setNewRepo('');\n      } catch (error) {\n        setAlert(true);\n        console.log(error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    submit();\n  }, [newRepo, repositorios]);\n\n  function handleinputChange(e) {\n    setNewRepo(e.target.value);\n    setAlert(null);\n  }\n\n  const handleDelete = useCallback(repo => {\n    const find = repositorios.filter(r => r.name !== repo);\n    setRepositorios(find);\n  }, [repositorios]);\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(FaGithub, {\n    size: 25,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), \"Meus Repositorios\"), React.createElement(Form, {\n    onSubmit: handleSubmit,\n    error: alert,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Adicionar Repositorios\",\n    value: newRepo,\n    onChange: handleinputChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), React.createElement(SubmitButton, {\n    loading: loading ? 1 : 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, loading ? React.createElement(FaSpinner, {\n    color: \"#FFF\",\n    size: 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }) : React.createElement(FaPlus, {\n    color: \"#FFF\",\n    size: 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }))), React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, repositorios.map(repo => React.createElement(\"li\", {\n    key: repo.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(DeleteButton, {\n    onClick: () => handleDelete(repo.name),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(FaTrash, {\n    size: 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })), repo.name), React.createElement(\"a\", {\n    href: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(FaBars, {\n    size: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/home/ljnferreira/development/github-consulting/src/pages/Main/index.js"],"names":["React","useState","useCallback","useEffect","FaGithub","FaPlus","FaSpinner","FaBars","FaTrash","Container","Form","SubmitButton","List","DeleteButton","api","Main","newRepo","setNewRepo","repositorios","setRepositorios","loading","setLoading","alert","setAlert","repoStorage","localStorage","getItem","JSON","parse","setItem","stringify","handleSubmit","e","preventDefault","submit","Error","response","get","hasRepo","find","repo","name","data","full_name","error","console","log","handleinputChange","target","value","handleDelete","filter","r","map"],"mappings":"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","sourcesContent":["import React, {useState, useCallback, useEffect} from 'react';\r\nimport { FaGithub, FaPlus, FaSpinner, FaBars, FaTrash } from 'react-icons/fa';\r\nimport {Container, Form, SubmitButton, List, DeleteButton} from './styles';\r\n\r\nimport api from '../../services/api';\r\n\r\nexport default function Main(){\r\n\r\n  const [newRepo, setNewRepo] = useState('');\r\n  const [repositorios, setRepositorios] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState(null);\r\n\r\n  // Buscar\r\n  useEffect(()=>{\r\n    const repoStorage = localStorage.getItem('repos');\r\n\r\n    if(repoStorage){\r\n      setRepositorios(JSON.parse(repoStorage));\r\n    }\r\n\r\n  }, []);\r\n\r\n  \r\n  // Salvar alterações\r\n  useEffect(()=>{\r\n    localStorage.setItem('repos', JSON.stringify(repositorios));\r\n  }, [repositorios]);\r\n\r\n  const handleSubmit = useCallback((e)=>{\r\n    e.preventDefault();\r\n\r\n    async function submit(){\r\n      setLoading(true);\r\n      setAlert(null);\r\n      try{\r\n\r\n        if(newRepo === ''){\r\n          throw new Error('Você precisa indicar um repositorio!');\r\n        }\r\n\r\n        const response = await api.get(`repos/${newRepo}`);\r\n\r\n        const hasRepo = repositorios.find(repo => repo.name === newRepo);\r\n\r\n        if(hasRepo){\r\n          throw new Error('Repositorio Duplicado');\r\n        }\r\n  \r\n        const data = {\r\n          name: response.data.full_name,\r\n        }\r\n    \r\n        setRepositorios([...repositorios, data]);\r\n        setNewRepo('');\r\n      }catch(error){\r\n        setAlert(true);\r\n        console.log(error);\r\n      }finally{\r\n        setLoading(false);\r\n      }\r\n\r\n    }\r\n\r\n    submit();\r\n\r\n  }, [newRepo, repositorios]);\r\n\r\n  function handleinputChange(e){\r\n    setNewRepo(e.target.value);\r\n    setAlert(null);\r\n  }\r\n\r\n  const handleDelete = useCallback((repo)=> {\r\n    const find = repositorios.filter(r => r.name !== repo);\r\n    setRepositorios(find);\r\n  }, [repositorios]);\r\n\r\n\r\n  return(\r\n    <Container>\r\n      \r\n      <h1>\r\n        <FaGithub size={25}/>\r\n        Meus Repositorios\r\n      </h1>\r\n\r\n      <Form onSubmit={handleSubmit} error={alert}>\r\n        <input \r\n        type=\"text\" \r\n        placeholder=\"Adicionar Repositorios\"\r\n        value={newRepo}\r\n        onChange={handleinputChange}\r\n        />\r\n\r\n        <SubmitButton loading={loading ? 1 : 0}>\r\n          {loading ? (\r\n            <FaSpinner color=\"#FFF\" size={14}/>\r\n          ) : (\r\n            <FaPlus color=\"#FFF\" size={14}/>\r\n          )}\r\n        </SubmitButton>\r\n\r\n      </Form>\r\n\r\n      <List>\r\n         {repositorios.map(repo => (\r\n           <li key={repo.name}>\r\n             <span>\r\n             <DeleteButton onClick={()=> handleDelete(repo.name) }>\r\n                <FaTrash size={14}/>\r\n             </DeleteButton>  \r\n             {repo.name}\r\n             </span>\r\n             <a href=\"\">\r\n               <FaBars size={20}/>\r\n             </a>\r\n           </li>\r\n         ))} \r\n      </List>\r\n\r\n    </Container>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}